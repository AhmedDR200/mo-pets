{
  "openapi": "3.0.0",
  "info": {
    "title": "MO API",
    "version": "1.0.0",
    "description": "API documentation for Pets Care E-Commerce"
  },
  "servers": [
    {
      "url": "http://localhost:{port}",
      "variables": {
        "port": {
          "default": "3000"
        }
      }
    },
    {
      "url": "https://mo-pets.vercel.app"
    }
  ],
  "tags": [
    { "name": "Health", "description": "Server health and status" },
    { "name": "Categories", "description": "Category CRUD and listing" },
    {
      "name": "SubCategories",
      "description": "Subcategory CRUD and listing"
    },
    { "name": "Products", "description": "Product CRUD and listing" },
    { "name": "Offers", "description": "Offer CRUD and listing" },
    { "name": "Sliders", "description": "Slider CRUD operations" },
    { "name": "Search", "description": "Search across all data types" },
    { "name": "Access", "description": "Wholesale access request and verification" }
  ],
  "paths": {
    "/api/search": {
      "get": {
        "summary": "Search across all data types",
        "description": "Search for products, categories, subcategories, and offers with a single query",
        "tags": ["Search"],
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": { "type": "string" },
            "description": "Search term to find matches across all data types"
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": false,
            "schema": { "type": "string" },
            "description": "Optional `Bearer` token returned from wholesale verification to include wholesale pricing in results"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful search operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "results": {
                      "type": "object",
                      "properties": {
                        "products": {
                          "type": "object",
                          "properties": {
                            "count": { "type": "integer", "example": 2 },
                            "data": { "type": "array", "items": { "$ref": "#/components/schemas/Product" } }
                          }
                        },
                        "categories": {
                          "type": "object",
                          "properties": {
                            "count": { "type": "integer", "example": 1 },
                            "data": { "type": "array", "items": { "$ref": "#/components/schemas/Category" } }
                          }
                        },
                        "subCategories": {
                          "type": "object",
                          "properties": {
                            "count": { "type": "integer", "example": 3 },
                            "data": { "type": "array", "items": { "$ref": "#/components/schemas/SubCategory" } }
                          }
                        },
                        "offers": {
                          "type": "object",
                          "properties": {
                            "count": { "type": "integer", "example": 1 },
                            "data": { "type": "array", "items": { "$ref": "#/components/schemas/Offer" } }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing query parameter",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "error" },
                    "message": { "type": "string", "example": "Search query is required" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/access/wholesale/request": {
      "post": {
        "summary": "Request wholesale access",
        "description": "Submit a wholesale access request. The system emails an OTP to the administrator, who shares it with the requester.",
        "tags": ["Access"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/WholesaleAccessRequest" }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Request accepted. Await OTP from administrator.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "message": {
                      "type": "string",
                      "example": "Wholesale access request submitted. An administrator will share the passcode with you."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid email address"
          },
          "500": {
            "description": "Wholesale access not configured"
          }
        }
      }
    },
    "/api/access/wholesale/verify": {
      "post": {
        "summary": "Verify wholesale OTP",
        "description": "Verify the administrator-issued OTP to obtain a 2-hour wholesale access token.",
        "tags": ["Access"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/WholesaleAccessVerification" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Wholesale access granted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WholesaleAccessTokenResponse" }
              }
            }
          },
          "400": {
            "description": "Missing email or OTP"
          },
          "401": {
            "description": "Invalid or expired OTP"
          },
          "500": {
            "description": "Wholesale access not configured"
          }
        }
      }
    },
    "/api/sliders": {
      "get": {
        "summary": "List all sliders",
        "description": "Get a list of all sliders with pagination",
        "tags": ["Sliders"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 },
            "description": "Page number for pagination"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 },
            "description": "Number of sliders per page"
          }
        ],
        "responses": {
          "200": {
            "description": "List of sliders",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "results": { "type": "integer", "example": 5 },
                    "totalCount": { "type": "integer", "example": 20 },
                    "page": { "type": "integer", "example": 1 },
                    "limit": { "type": "integer", "example": 10 },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Slider" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new slider",
        "description": "Add a new slider image",
        "tags": ["Sliders"],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Slider image file"
                  },
                  "alt": {
                    "type": "string",
                    "description": "Alternative text for the image"
                  },
                  "active": {
                    "type": "boolean",
                    "description": "Whether the slider is active"
                  },
                  "order": {
                    "type": "integer",
                    "description": "Display order of the slider"
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Slider created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/Slider" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          }
        }
      }
    },
    "/api/sliders/active": {
      "get": {
        "summary": "Get active sliders",
        "description": "Get all active sliders for display on the website",
        "tags": ["Sliders"],
        "responses": {
          "200": {
            "description": "List of active sliders",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "results": { "type": "integer", "example": 5 },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Slider" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/sliders/{id}": {
      "get": {
        "summary": "Get slider by ID",
        "description": "Get details of a specific slider",
        "tags": ["Sliders"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "Slider ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Slider details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/Slider" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Slider not found"
          }
        }
      },
      "delete": {
        "summary": "Delete slider",
        "description": "Delete a slider by ID",
        "tags": ["Sliders"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "Slider ID"
          }
        ],
        "responses": {
          "204": {
            "description": "Slider deleted successfully"
          },
          "404": {
            "description": "Slider not found"
          }
        }
      }
    },
    "/api/sliders/{id}/toggle-status": {
      "patch": {
        "summary": "Toggle slider status",
        "description": "Toggle the active status of a slider",
        "tags": ["Sliders"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "description": "Slider ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Slider status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/Slider" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Slider not found"
          }
        }
      }
    },
    "/api/offers": {
      "get": {
        "summary": "List offers",
        "description": "Get a list of all offers with pagination, sorting, and filtering options",
        "tags": ["Offers"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 },
            "description": "Page number for pagination"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 },
            "description": "Number of offers per page"
          },
          {
            "name": "sort",
            "in": "query",
            "schema": { "type": "string", "default": "-createdAt" },
            "description": "Sort field and direction (prefix with - for descending)"
          },
          {
            "name": "active",
            "in": "query",
            "schema": { "type": "boolean" },
            "description": "Filter by active status (true/false)"
          },
          {
            "name": "current",
            "in": "query",
            "schema": { "type": "boolean" },
            "description": "Filter for currently active offers (within start and end dates)"
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": false,
            "schema": { "type": "string" },
            "description": "Optional `Bearer` token returned from wholesale verification to include wholesale pricing in offer products"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "results": { "type": "integer" },
                    "paginationInfo": {
                      "type": "object",
                      "properties": {
                        "currentPage": { "type": "integer" },
                        "totalPages": { "type": "integer" },
                        "limit": { "type": "integer" },
                        "totalDocuments": { "type": "integer" }
                      }
                    },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/OfferResponse" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create offer",
        "description": "Create a new offer with discount that will be applied to the specified products. Products must not already have active offers.",
        "tags": ["Offers"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/OfferCreate" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/OfferResponse" }
                  }
                }
              }
            }
          },
          "400": { 
            "description": "Bad request - One or more products already have an active offer or end date is not after start date" 
          },
          "404": { 
            "description": "One or more products not found" 
          }
        }
      }
    },
    "/api/offers/{id}": {
      "get": {
        "summary": "Get offer by ID",
        "description": "Get detailed information about a specific offer",
        "tags": ["Offers"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Offer ID"
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": false,
            "schema": { "type": "string" },
            "description": "Optional `Bearer` token returned from wholesale verification to include wholesale pricing in offer products"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/OfferResponse" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Offer not found"
          }
        }
      },
      "patch": {
        "summary": "Update offer",
        "description": "Update an existing offer. When updating products, checks are performed to ensure new products don't already have active offers. If products are removed from the offer, their original prices are restored.",
        "tags": ["Offers"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Offer ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/OfferUpdate" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "success" },
                    "data": { "$ref": "#/components/schemas/OfferResponse" }
                  }
                }
              }
            }
          },
          "400": { 
            "description": "Bad request - One or more products already have an active offer, end date is not after start date, or invalid data" 
          },
          "404": { 
            "description": "Offer not found or one or more products not found" 
          }
        }
      },
      "delete": {
        "summary": "Delete offer",
        "description": "Delete an offer and restore original prices for all associated products. This is handled by the Offer model post-delete middleware.",
        "tags": ["Offers"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Offer ID"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content - Offer deleted successfully and product prices restored"
          },
          "404": {
            "description": "Offer not found"
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "summary": "Health check",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "Server is running"
          }
        }
      }
    },
    "/api/categories": {
      "get": {
        "summary": "List categories",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": { "type": "string", "default": "-createdAt" }
          }
        ],
        "responses": { "200": { "description": "Success" } }
      },
      "post": {
        "summary": "Create category",
        "tags": ["Categories"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CategoryCreate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  }
                },
                "required": ["name", "description"]
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Created" },
          "400": { "description": "Bad Request" },
          "409": { "description": "Conflict" }
        }
      }
    },
    "/api/categories/{id}": {
      "get": {
        "summary": "Get category",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": false,
            "schema": { "type": "string" },
            "description": "Optional `Bearer` token returned from wholesale verification to include wholesale pricing in results"
          }
        ],
        "responses": {
          "200": { "description": "Success" },
          "404": { "description": "Not Found" }
        }
      },
      "patch": {
        "summary": "Update category",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CategoryUpdate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Updated" },
          "404": { "description": "Not Found" }
        }
      },
      "delete": {
        "summary": "Delete category",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Deleted" },
          "404": { "description": "Not Found" }
        }
      }
    },
    "/api/subcategories": {
      "get": {
        "summary": "List subcategories",
        "tags": ["SubCategories"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 }
          },
          { "name": "category", "in": "query", "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Success" } }
      },
      "post": {
        "summary": "Create subcategory",
        "tags": ["SubCategories"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SubCategoryCreate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  },
                  "category": { "type": "string" }
                },
                "required": ["name", "description", "category"]
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Created" },
          "400": { "description": "Bad Request" },
          "409": { "description": "Conflict" }
        }
      }
    },
    "/api/subcategories/{id}": {
      "get": {
        "summary": "Get subcategory",
        "tags": ["SubCategories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Success" },
          "404": { "description": "Not Found" }
        }
      },
      "patch": {
        "summary": "Update subcategory",
        "tags": ["SubCategories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SubCategoryUpdate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  },
                  "category": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Updated" },
          "404": { "description": "Not Found" }
        }
      },
      "delete": {
        "summary": "Delete subcategory",
        "tags": ["SubCategories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Deleted" },
          "404": { "description": "Not Found" }
        }
      }
    },
    "/api/products": {
      "get": {
        "summary": "List products",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 },
            "description": "Page number for pagination"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 10 },
            "description": "Number of products per page"
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string",
              "default": "-createdAt",
              "enum": [
                "-createdAt",
                "createdAt",
                "name",
                "-name",
                "minWholesalePrice",
                "maxWholesalePrice",
                "minRetailPrice",
                "maxRetailPrice"
              ]
            },
            "description": "Sort field and direction. Use 'minWholesalePrice' or 'maxWholesalePrice' to sort by wholesale price (ascending/descending). Use 'minRetailPrice' or 'maxRetailPrice' to sort by retail price (ascending/descending). Prefix any field with '-' for descending order."
          },
          {
            "name": "category",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by category ID"
          },
          {
            "name": "subCategory",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by subcategory ID"
          },
          {
            "name": "name",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Search products by name (case-insensitive)"
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": false,
            "schema": { "type": "string" },
            "description": "Optional `Bearer` token returned from wholesale verification to include wholesale pricing in results"
          }
        ],
        "responses": { "200": { "description": "Success" } }
      },
      "post": {
        "summary": "Create product",
        "tags": ["Products"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProductCreate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "wholesalePrice": { "type": "number", "minimum": 0 },
                  "retailPrice": { "type": "number", "minimum": 0 },
                  "stock": { "type": "integer", "minimum": 0 },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  },
                  "category": { "type": "string" },
                  "subCategory": { "type": "string" }
                },
                "required": [
                  "name",
                  "wholesalePrice",
                  "retailPrice",
                  "stock",
                  "category",
                  "subCategory"
                ]
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Created" },
          "400": { "description": "Bad Request" },
          "409": { "description": "Conflict" }
        }
      }
    },
    "/api/products/{id}": {
      "get": {
        "summary": "Get product",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Success" },
          "404": { "description": "Not Found" }
        }
      },
      "patch": {
        "summary": "Update product",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProductUpdate" }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "wholesalePrice": { "type": "number", "minimum": 0 },
                  "retailPrice": { "type": "number", "minimum": 0 },
                  "stock": { "type": "integer", "minimum": 0 },
                  "description": { "type": "string" },
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Image file to upload"
                  },
                  "category": { "type": "string" },
                  "subCategory": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Updated" },
          "404": { "description": "Not Found" }
        }
      },
      "delete": {
        "summary": "Delete product",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Deleted" },
          "404": { "description": "Not Found" }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "WholesaleAccessToken": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token returned by `/api/access/wholesale/verify`. Include as `Authorization: Bearer <token>` to view wholesale pricing."
      }
    },
    "schemas": {
      "Slider": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "60d21b4667d0d8992e610c85"
          },
          "image": {
            "type": "string",
            "example": "https://res.cloudinary.com/example/image/upload/v1624291234/sliders/image1.jpg"
          },
          "alt": {
            "type": "string",
            "example": "Slider image"
          },
          "active": {
            "type": "boolean",
            "example": true
          },
          "order": {
            "type": "integer",
            "example": 1
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2023-06-15T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2023-06-15T10:00:00.000Z"
          }
        }
      },
      "CategoryCreate": {
        "type": "object",
        "required": ["name", "description"],
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" }
        }
      },
      "CategoryUpdate": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" }
        }
      },
      "SubCategoryCreate": {
        "type": "object",
        "required": ["name", "description", "category"],
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "category": { "type": "string" }
        }
      },
      "SubCategoryUpdate": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "category": { "type": "string" }
        }
      },
      "ProductCreate": {
        "type": "object",
        "required": [
          "name",
          "wholesalePrice",
          "retailPrice",
          "stock",
          "category",
          "subCategory"
        ],
        "properties": {
          "name": { "type": "string" },
          "wholesalePrice": { "type": "number", "minimum": 0 },
          "retailPrice": { "type": "number", "minimum": 0 },
          "stock": { "type": "integer", "minimum": 0 },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "category": { "type": "string" },
          "subCategory": { "type": "string" }
        }
      },
      "ProductUpdate": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "wholesalePrice": { "type": "number", "minimum": 0 },
          "retailPrice": { "type": "number", "minimum": 0 },
          "stock": { "type": "integer", "minimum": 0 },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "category": { "type": "string" },
          "subCategory": { "type": "string" }
        }
      },
      "ProductResponse": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "name": { "type": "string" },
          "wholesalePrice": {
            "type": "number",
            "description": "Wholesale price (omitted unless a valid wholesale token is supplied)"
          },
          "retailPrice": { "type": "number" },
          "originalRetailPrice": { 
            "type": "number",
            "description": "Original retail price before discount (only present when product has active offer)"
          },
          "discountedRetailPrice": { 
            "type": "number",
            "description": "Discounted retail price (only present when product has active offer)"
          },
          "hasActiveOffer": { 
            "type": "boolean",
            "description": "Indicates if product currently has an active offer applied"
          },
          "stock": { "type": "integer" },
          "description": { "type": "string" },
          "images": { 
            "type": "array",
            "items": { "type": "string" }
          },
          "category": { 
            "type": "object",
            "properties": {
              "_id": { "type": "string" },
              "name": { "type": "string" }
            }
          },
          "subCategory": { 
            "type": "object",
            "properties": {
              "_id": { "type": "string" },
              "name": { "type": "string" }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "OfferCreate": {
        "type": "object",
        "required": ["title", "description", "discount", "startDate", "endDate", "products"],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "minLength": 20
          },
          "discount": {
            "type": "number",
            "minimum": 1,
            "maximum": 99,
            "description": "Discount percentage (1-99)"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "description": "Offer start date and time"
          },
          "endDate": {
            "type": "string",
            "format": "date-time",
            "description": "Offer end date and time (must be after startDate)"
          },
          "products": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid",
              "description": "Product IDs to apply the offer to"
            },
            "description": "Products that will have this discount applied"
          },
          "active": {
            "type": "boolean",
            "default": true,
            "description": "Whether the offer is active"
          },
          "priceTypes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["wholesalePrice", "retailPrice"]
            },
            "default": ["retailPrice"],
            "minItems": 1,
            "description": "Array of price types to apply discount to. Can include 'wholesalePrice', 'retailPrice', or both. At least one must be selected."
          }
        }
      },
      "OfferUpdate": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "minLength": 20
          },
          "discount": {
            "type": "number",
            "minimum": 1,
            "maximum": 99,
            "description": "Discount percentage (1-99)"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "description": "Offer start date and time"
          },
          "endDate": {
            "type": "string",
            "format": "date-time",
            "description": "Offer end date and time (must be after startDate)"
          },
          "products": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Products that will have this discount applied"
          },
          "active": {
            "type": "boolean",
            "description": "Whether the offer is active"
          },
          "priceTypes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["wholesalePrice", "retailPrice"]
            },
            "description": "Array of price types to apply discount to. Can include 'wholesalePrice', 'retailPrice', or both."
          }
        }
      },
      "OfferResponse": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "title": { "type": "string" },
          "description": { "type": "string" },
          "discount": { 
            "type": "number",
            "description": "Discount percentage (1-99)"
          },
          "startDate": { "type": "string", "format": "date-time" },
          "endDate": { "type": "string", "format": "date-time" },
          "products": { 
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "_id": { "type": "string" },
                "name": { "type": "string" },
                "retailPrice": { "type": "number" },
                "wholesalePrice": {
                  "type": "number",
                  "description": "Wholesale price (omitted unless a valid wholesale token is supplied)"
                },
                "image": { "type": "string" }
              }
            },
            "description": "Array of products with applied discounts"
          },
          "active": { 
            "type": "boolean",
            "description": "Whether the offer is active and discounts are applied"
          },
          "priceTypes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["wholesalePrice", "retailPrice"]
            },
            "description": "Array of price types that the discount applies to. Can include 'wholesalePrice', 'retailPrice', or both."
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "name": { "type": "string" },
          "wholesalePrice": {
            "type": "number",
            "description": "Wholesale price (omitted unless a valid wholesale token is supplied)"
          },
          "retailPrice": { "type": "number" },
          "originalRetailPrice": { "type": "number" },
          "hasActiveOffer": { "type": "boolean" },
          "description": { "type": "string" },
          "stock": { "type": "integer" },
          "image": { "type": "string" },
          "category": {
            "type": "object",
            "properties": {
              "_id": { "type": "string" },
              "name": { "type": "string" }
            }
          },
          "subCategory": {
            "type": "object",
            "properties": {
              "_id": { "type": "string" },
              "name": { "type": "string" }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "products": {
            "type": "array",
            "items": { "type": "string" }
          },
          "subCategories": {
            "type": "array",
            "items": { "type": "string" }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "SubCategory": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "image": { "type": "string" },
          "category": {
            "type": "object",
            "properties": {
              "_id": { "type": "string" },
              "name": { "type": "string" }
            }
          },
          "products": {
            "type": "array",
            "items": { "type": "string" }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "WholesaleAccessRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "buyer@example.com",
            "description": "Email address requesting wholesale access"
          }
        }
      },
      "WholesaleAccessVerification": {
        "type": "object",
        "required": ["email", "otp"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "buyer@example.com",
            "description": "Email used when requesting wholesale access"
          },
          "otp": {
            "type": "string",
            "pattern": "^[0-9]{6}$",
            "example": "123456",
            "description": "6-digit one-time passcode provided by the administrator"
          }
        }
      },
      "WholesaleAccessTokenResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "example": "success" },
          "token": {
            "type": "string",
            "description": "Bearer token to access wholesale pricing"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "Expiration timestamp for the wholesale token (typically 2 hours from issuance)"
          }
        }
      },
      "Offer": {
        "type": "object",
        "properties": {
          "_id": { "type": "string" },
          "title": { "type": "string" },
          "description": { "type": "string" },
          "discount": { "type": "number" },
          "startDate": { "type": "string", "format": "date-time" },
          "endDate": { "type": "string", "format": "date-time" },
          "products": {
            "type": "array",
            "items": { "type": "string" }
          },
          "active": { "type": "boolean" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      }
    }
  }
}
